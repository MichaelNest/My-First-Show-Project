{% extends 'base.html' %}

{% block title %}Articles{% endblock title %}

{% block banner %}
    {% include 'includes/banner.html' %}
{% endblock banner %}

{% block content %}
<div class="container">
    <div class="container text-center">
        <p> <h1>Articles:</h1> </p>
    </div>
    {% for article in object_list %}
    <div class="card my-2" >
        <div class="card-body">
<!--        <div class="post-entry">-->
            <div class="container-fluid">
                <div class="row">
                    <div class="col-8">
                        <h2><a href="{% url 'articles:article_detail' article.pk %}">{{ article.title }}</a></h2>
                        <p>{{ article.body|truncatewords:22|safe }}...</p>
                        <p>Author: {{ article.author }} | {{ article.create_date|date:'d-m-Y' }}</p>
                    </div>
                    <div class="col-4">
                        {% if article.image %}
                        <p><a href="{% url 'articles:article_detail' article.pk %}"><img src="{{ article.image.url }}" style="max-width:200px; max-height:200px;" alt=""></a></p>
                        {% endif %}
                    </div>
                </div>'
            </div>

<!--        </div>-->
        </div>
        <div class="card-footer">
            <p>Comments: {{ article.comments.count }}</p>
        </div>
    </div>
    {% endfor %}
    
    {% include 'includes/pagination.html' with page=page_obj %}

    <div class="container text-center my-3">
    {% if user.is_authenticated %}
        <a href="{% url 'articles:article_create' %}" class="btn btn-primary ml-2">Create new Article</a>
    {% else %}
    <h5>Please <a href="{% url 'login' %}">Login</a> to add Article</h5>
    {% endif %}
    </div>

</div>
{% endblock content %}